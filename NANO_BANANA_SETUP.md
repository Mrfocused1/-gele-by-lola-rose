# üçå Nano Banana (Gemini) Setup Guide

## üö® **CRITICAL: Fix Your Nano Banana Issues**

Your virtual try-on feature is using Google Gemini 2.5 Flash Image (nicknamed "Nano Banana"), but there are several issues preventing it from working properly.

## ‚úÖ **What I've Fixed:**

1. **Standardized API endpoint** - Now using correct `gemini-2.5-flash-image` model
2. **Improved error handling** - Better error messages and safety filter detection
3. **Enhanced response processing** - More robust image extraction
4. **Added environment validation** - Clear error messages for missing config

## üîß **What You Need to Do:**

### Step 1: Create Environment File
Create a `.env.local` file in your project root (`gele-by-lola-rose/`) with these contents:

```bash
# Google Gemini API Configuration (Nano Banana)
GEMINI_API_KEY=your_actual_gemini_api_key_here

# Cloudinary Configuration  
CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret
```

### Step 2: Get Your API Keys

#### Google Gemini API Key:
1. Go to [Google AI Studio](https://makersuite.google.com/app/apikey)
2. Sign in with your Google account
3. Click "Create API Key"
4. Copy the key and replace `your_actual_gemini_api_key_here`

#### Cloudinary Credentials:
1. Go to [Cloudinary Console](https://cloudinary.com/console)
2. Sign up/login to your account
3. Find your credentials in the dashboard:
   - Cloud Name
   - API Key
   - API Secret

### Step 3: Test the Fix
1. Save your `.env.local` file
2. Restart your development server: `npm run dev`
3. Go to your try-on page and test with an image

## üêõ **Common Issues & Solutions:**

### Issue: "GEMINI_API_KEY not configured"
**Solution:** Make sure your `.env.local` file exists and has the correct API key

### Issue: "No image generated - check your API key and model access"
**Solution:** 
- Verify your Gemini API key is valid
- Make sure you have access to `gemini-2.5-flash-image` model
- Check if you have billing enabled in Google AI Studio

### Issue: "Content was blocked by safety filters"
**Solution:** 
- Try with a different image
- Make sure the image is appropriate and doesn't violate Google's safety policies
- Consider adjusting the prompt

### Issue: "No image data generated by Gemini"
**Solution:**
- The model might be having issues with your specific image
- Try with a clearer, higher quality image
- Make sure the image is in JPEG format

## üéØ **Expected Behavior:**

When working correctly, your nano banana integration should:
1. Accept user photos via the try-on page
2. Send them to Gemini 2.5 Flash Image API
3. Generate images with gele headwraps added
4. Return the processed image for display

## üìû **Need Help?**

If you're still having issues after following these steps:
1. Check your browser's developer console for error messages
2. Look at your terminal logs when running `npm run dev`
3. Verify all API keys are correctly formatted
4. Test with a simple, clear photo first

The nano banana should now work much more reliably! üçå‚ú®
